/***
Схема базы данных состоит из трех отношений:
utQ (Q_ID int, Q_NAME varchar(35)); utV (V_ID int, V_NAME varchar(35), V_COLOR char(1)); utB (B_Q_ID int, B_V_ID int, B_VOL tinyint, B_DATETIME datetime).
Таблица utQ содержит идентификатор и название квадрата, цвет которого первоначально черный.
Таблица utV содержит идентификатор, название и цвет баллончика с краской.
Таблица utB содержит информацию об окраске квадрата баллончиком: идентификатор квадрата, идентификатор баллончика, количество краски и время окраски.
При этом следует иметь в виду, что:
- баллончики с краской могут быть трех цветов - красный V_COLOR='R', зеленый V_COLOR='G', голубой V_COLOR='B' (латинские буквы).
- объем баллончика равен 255 и первоначально он полный;
- цвет квадрата определяется по правилу RGB, т.е. R=0,G=0,B=0 - черный, R=255, G=255, B=255 - белый;
- запись в таблице закрасок utB уменьшает количество краски в баллончике на величину B_VOL и соответственно увеличивает количество краски в квадрате на эту же величину;
- значение 0 < B_VOL <= 255;
- количество краски одного цвета в квадрате не превышает 255, а количество краски в баллончике не может быть меньше нуля;
- время окраски B_DATETIME дано с точностью до секунды, т.е. не содержит миллисекунд.***/

/***
Задание: 92 (ZrenBy: 2003-09-01)
Выбрать все белые квадраты, которые окрашивались только из баллончиков, 
пустых к настоящему времени. Вывести имя квадрата
SELECT DISTINCT q.Q_NAME
FROM utB b, utQ q
WHERE b.B_Q_ID = q.Q_ID and
      b.B_Q_ID in (SELECT B1.B_Q_ID
                   FROM utB b1, utV v1
                   WHERE b1.B_V_ID = v1.V_ID
                   GROUP BY B1.B_Q_ID
                   HAVING sum(iif(v1.V_COLOR = 'R', b1.B_VOL, 0))>=255 and
                          sum(iif(v1.V_COLOR = 'G', b1.B_VOL, 0))>=255 and
                          sum(iif(v1.V_COLOR = 'B', b1.B_VOL, 0))>=255
                  ) and
 b.B_Q_ID not in (SELECT B1.B_Q_ID
                   FROM utB b1, utV v1
                   WHERE b1.B_V_ID = v1.V_ID and
                   v1.V_ID not in (SELECT B2.B_V_ID
                                   FROM utB b2
                                   GROUP BY B2.B_V_ID
                                   HAVING SUM(B2.B_VOL) >= 255
                                  )
                  )

***/
